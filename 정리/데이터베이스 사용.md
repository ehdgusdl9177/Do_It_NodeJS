## 몽고디비
- 비관계형 데이터베이스, 이런 시스템은 NoSQL 또는 Not Only SQL이라고 한다.
- NoSQL에 주목하는 이유는 대부분 성능 때문이다.
- 관계형 데이터베이스는 시스템의 신뢰도를 높이는데 필요한 장지를 많이 가지고 있다. 또 SQL문을 읽어 들이고 실행하는 데 많은 리소스를 사용하며 이 때문에 성능이 떨어지는 경우가 많다.
- 이에 반해 NoSQL 데이터베이스는 성능을 최우선으로 생각하기 때문에 실시간으로 처리해야 하는 경우나 대용량 트래픽을 감당할 수 있는 메시징 시스템 등에 활용된다.
- 특히 클라우드 서비스로 서버를 구성하는 경우가 많아지면서 많은 사용자를 수용하거나 시스템 자원을 적게 소모하는 NoSQL 데이터베이스에 점점 더 관심을 갖게 되었다.
- 몽고디비는 NoSQL이기 때문에 관계형 데이터베이스의 테이블 개념이 없다. 그 대신 몽고디비는 여러 데이터가 모인 하나의 단위를 컬렉션(Collection)이라고 부른다.
- 관계형 데이터베이스의 테이블이 컬렉션이라고 단순하게 생각할 수도 있지만 테이블과 달리, 데이터를 정해 놓은 칼럼의 형태대로 컬렉션에 넣어야 한다는 제약은 없다.

#### 몽고디비에 데이터를 추가하거나 조회하기
- % mongo: 명령어를 입력하면 몽고디비 데이터베이스에 연결할 수 있는 셸(Shell) 상태로 들어간다.
  - 셸(Shell): 셸이란 명령을 받아서 실행하는 프로그램이다. 어떤 명령을 실행하면 명령을 받아들일 준비가 되는데 이 상태에서 명령을 실행하면 셸이 그 명령을 이해하고 처리한다.
- % use local: use 명령을 입력해서 데이터베이스를 지정한다
- % db.users.insert({name: '소녀시대', age: 20}): insert 명령을 실행하면 users 컬렉션이 자동으로 만들어지며 그 안에 파라미터로 전달한 JSON 객체가 추가된다. 이 JSON 객체가 바로 문서 객체가 된다.
- % db.users.find().pretty(): 명령을 입력하면 users 컬렉션에 있는 모든 문서 객체들을 반환(Return)한다.
- pretty() 메소드는 결과가 출력될 때 예쁘게 보이도록 조회된 결과에 띄어쓰기나 줄 바꿈을 자동으로 넣어 준다.

#### 몽구스로 데이터베이스 다루기
- 관계형 데이터베이스의 테이블이나 엑셀의 시트(Sheet)처럼 쉽게 다룰 수 있다. 이와 같이 일정한 틀을 제공하는 모듈 중에서 대표적인 것이 몽구스(mongoose)이다.
- NoSQL 데이터베이스 중 하나인 몽고디비를 사용하면 문서 객체 안에 들어가는 속성을 마음대로 바꿀 수 있으므로 매우 유연하게 데이터를 저장할 수 있다. 하지만 컬렉션 안에 들어 있는 여러 개의 문서 객체를 조회할 때는 제약이 생길 수도 있다.
- 예를 들어, 같은 users 컬렉션 안에 들어 있는 문서 객체라도 어떤 문서 객체에는 name 속성이 있는 데 반해 다른 문서 객체에는 name 속성이 없을 수도 있다. 때문에 관계형 데이터베이스처럼 조회 조건을 공통 적용하기 어려운 문제점이 있다.
- 이런 문제 때문에 스키마(Schema)를 만들고, 그 스키마에 따라 문서 객체를 저장하는 것이 때로는 편리하다.
- 이렇게 자바스크립트 객체와 데이터베이스 객체를 서로 매칭하여 바꿀 수 있게 하는 것을 오브젝터 맵퍼(Object Mapper)라고 한다. 이 중에서 가장 많이 사용하는 것이 바로 몽구스(mongoose)모듈이다.
- 이 모듈을 사용하면 스키마를 만들고 이 스키마에 맞는 모델(Model)을 만들어서 데이터를 손쉽게 저장하거나 조회할 수 있다.
  - connect(uri(s), [options], [callback]): mongoose를 사용해 데이터베이스에 연결한다. 연결 후에는 mongoose.connection 객체를 사용해 연결 관련 이벤트를 처리할 수 있다.
  - Schema(): 스키마를 정의하는 생성자이다.
  - model(name, [schema], [collection], [skipInit]): 모델을 정의한다. [collection]이 지정되면 이 컬렉션을 사용하며, 지정하지 않으면 name으로 유추한 컬렉션을 사용한다.
- 데이터 조회 방법
  - find([criteria], [callback]): 조회 조건을 사용해 컬렉션의 데이터를 조회한다. 조회 결과는 콜백 함수로 전달된다.
  - save([options], [callback]): 모델 인스턴스 객체의 데이터를 저장한다. 저장 결과는 콜백 함수로 전달된다.
  - update([criteria], [doc], [options], [callback]): 컬렉션의 데이터를 조회한 후 업데이트한다. where() 메소드와 함께 사용된다.
  - remove([criteria], [callback]): 컬렉션의 데이터를 삭제한다.

#### 인덱스와 메소드 사용
- 몽고디비는 데이터베이스이므로 빠른 검색을 위해 각각의 속성에 인덱스를 만들 수 있다.

#### 비밀번호 암호화
- 단방향 암호화
  - 단방향 암호화란 말 그대로 한 방향으로만 암호화가 가능한 것이다. 이와 반대되는 것이 양방향 암호화이다.
  - 예를 들어, 단방향 암호화는 hello라는 글자를 람호화했다면 암호화된 데이터는 다시 원본인 hello로 복구할 수 없다.
  - 원본 글자로 복구하는 과정을 복호화(Description)라고 하는데 복호화할 수 있는 방법이 없으므로 한쪽 방향으로만 암호화(Encryption)가 가능하다는 의미로 단방향 암호화라고 부른다.
  - 이에 반해 양방향 암호화는 hello라는 글자를 암호화했다면 암호화된 데이터를 다시 원본인 hello로 복호화할 수 있다.
- 노드는 암호화를 위해 crypto 모듈을 제공한다.
- authenticate 메소드는 파라미터로 전달된 비밀번호와 암호화된 비밀번호가 같은지 비교한다.

### 관계형 데이터베이스
- 데이터 항목들을 모아 놓은 집합체인 정형화된 테이블을 여러 개 포함하고 있으면서 다양한 방법으로 데이터에 접근하거나 조회할 수 있도록 만든 데이터 저장소를 말한다.
- 관계형 데이터베이스는 데이터를 조작하거나 접근할 수 있도록 표준 검색 언어 SQL을 제공하며, SQL 문장은 관계형 데이터베이스의 데이터를 직접 조회하거나 보고서를 추출하는 데 주로 사용된다.

